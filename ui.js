// Handles DOM elements, timeline UI, and wiring to engine import { state, createEmptyFrames, draw } from "./animationEngine.js"; export const ui = { imageInput: null, styleSelect: null, fpsInput: null, frameCountInput: null, buildTimelineBtn: null, offsetXInput: null, offsetYInput: null, saveFrameBtn: null, playBtn: null, stopBtn: null, framesContainer: null, currentFrameLabel: null, }; export function initUI() { ui.imageInput = document.getElementById("imageInput"); ui.styleSelect = document.getElementById("styleSelect"); ui.fpsInput = document.getElementById("fpsInput"); ui.frameCountInput = document.getElementById("frameCountInput"); ui.buildTimelineBtn = document.getElementById("buildTimelineBtn"); ui.offsetXInput = document.getElementById("offsetXInput"); ui.offsetYInput = document.getElementById("offsetYInput"); ui.saveFrameBtn = document.getElementById("saveFrameBtn"); ui.playBtn = document.getElementById("playBtn"); ui.stopBtn = document.getElementById("stopBtn"); ui.framesContainer = document.getElementById("framesContainer"); ui.currentFrameLabel = document.getElementById("currentFrameLabel"); } export function rebuildTimelineUI(onFrameClick) { ui.framesContainer.innerHTML = ""; state.frames.forEach((_, index) => { const div = document.createElement("div"); div.className = "frame" + (index === state.activeFrameIndex ? " active" : ""); div.textContent = index + 1; div.addEventListener("click", () => onFrameClick(index)); ui.framesContainer.appendChild(div); }); } export function updateFrameSelectionUI() { const children = ui.framesContainer.children; for (let i = 0; i < children.length; i++) { children[i].classList.toggle("active", i === state.activeFrameIndex); } } export function loadFrameOffsetsToInputs() { const frame = state.frames[state.activeFrameIndex]; ui.offsetXInput.value = frame.offsetX; ui.offsetYInput.value = frame.offsetY; } export function setupInitialFrames() { createEmptyFrames(8); state.activeFrameIndex = 0; ui.currentFrameLabel.textContent = 1; rebuildTimelineUI(() => {}); loadFrameOffsetsToInputs(); draw(ui.styleSelect.value); }
